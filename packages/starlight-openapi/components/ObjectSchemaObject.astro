---
import { getProperties, isAdditionalPropertiesWithSchemaObject, type SchemaObject } from '../libs/schemaObject'
import Schema from './SchemaObject.astro'

interface Props {
  schemaObject: SchemaObject
}

const { schemaObject } = Astro.props

const properties = getProperties(schemaObject)
---

{schemaObject.minProperties && <div>Min Properties: {schemaObject.minProperties}</div>}
{schemaObject.maxProperties && <div>Max Properties: {schemaObject.maxProperties}</div>}
<ul>
  {
    Object.entries(properties).map(([name, schema]) => (
      <li>
        <div>Property Name: {name}</div>
        <Schema schemaObject={schema} />
      </li>
    ))
  }
  {
    schemaObject.additionalProperties && (
      <li>
        <div>Additional Properties</div>
        {schemaObject.additionalProperties === true ? (
          <div>Any additional properties are allowed</div>
        ) : isAdditionalPropertiesWithSchemaObject(schemaObject.additionalProperties) ? (
          <Schema schemaObject={schemaObject.additionalProperties} />
        ) : null}
      </li>
    )
  }
</ul>
<div>Required Properties: {schemaObject.required?.join(' - ')}</div>
