---
import type { InferGetStaticPropsType } from 'astro'

import { getSchemaStaticPaths } from '../libs/route'
import { getPageProps } from '../libs/starlight'

import Operation from './Operation.astro'
import Page from './overrides/Page.astro'
import Overview from './Overview.astro'

export function getStaticPaths() {
  return getSchemaStaticPaths()
}

type Props = InferGetStaticPropsType<typeof getStaticPaths>

const { schema, type } = Astro.props

const isOverview = type === 'overview'

const title = isOverview ? 'Overview' : Astro.props.operation.title
---

<Page {...getPageProps(title)}>
  {isOverview ? <Overview {schema} /> : <Operation {schema} operation={Astro.props.operation} />}
</Page>
