---
import type { PathItemOperation } from '../libs/operation'
import type { Schema } from '../libs/schema'

import ExternalDocs from './ExternalDocs.astro'
import Parameters from './Parameters.astro'
import RequestBody from './RequestBody.astro'
import Responses from './Responses.astro'
import Security from './Security.astro'

interface Props {
  operation: PathItemOperation
  schema: Schema
}

const {
  operation: { method, operation, path },
  schema,
} = Astro.props

// TODO(HiDeoo) capitalize description
---

<div>
  {operation.description && <div>Description in MARKDOWN: {operation.description}</div>}
  <ExternalDocs docs={operation.externalDocs} />
  <div>
    <div>Method: {method}</div>
    <div>Path: {path}</div>
  </div>
  {operation.deprecated && <div>OPERATION DEPRECATED</div>}
  <Security {operation} {schema} />
  <Parameters operation={Astro.props.operation} />
  <RequestBody {operation} {schema} />
  <Responses {operation} responses={operation.responses} {schema} />
</div>
