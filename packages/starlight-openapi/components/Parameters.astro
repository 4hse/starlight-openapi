---
import type { PathItemOperation } from '../libs/operation'
import { getParametersByLocation } from '../libs/parameter'
import Parameter from './Parameter.astro'

interface Props {
  operation: PathItemOperation
}

const {
  operation: { operation, pathItem },
} = Astro.props

const parametersByLocation = getParametersByLocation(operation.parameters, pathItem.parameters)

// TODO(HiDeoo) Format location
---

{
  parametersByLocation.size > 0 && (
    <>
      <h2>Parameters</h2>
      <div>
        {Array.from(parametersByLocation.entries()).map(([location, parameters]) => (
          <>
            <h3>{location} parameters</h3>
            <ul>
              {Array.from(parameters.values()).map((parameter) => (
                <Parameter {parameter} />
              ))}
            </ul>
          </>
        ))}
      </div>
    </>
  )
}
