---
import { isOpenAPIV2Items } from '../libs/items'
import type { Parameter } from '../libs/parameter'
import { isParameterWithSchemaObject } from '../libs/schemaObject'

import Examples from './Examples.astro'
import Items from './Items.astro'
import SchemaObject from './SchemaObject.astro'

interface Props {
  parameter: Parameter
}

const { parameter } = Astro.props

const hasExamples = parameter.example !== undefined || parameter.examples !== undefined
---

<li>
  <div>{parameter.name}</div>
  {parameter.description && <div>{parameter.description}</div>}
  <div>{parameter.required ? 'REQUIRED' : 'NOT REQUIRED'}</div>
  {parameter.deprecated && <div>DEPRECATED</div>}
  {parameter.allowEmptyValue ? <div>ALLOW EMPTY VALUE</div> : <div>DO NOT ALLOW EMPTY VALUE</div>}
  {
    isOpenAPIV2Items(parameter) ? (
      <Items items={parameter} />
    ) : isParameterWithSchemaObject(parameter) ? (
      <>
        <SchemaObject schemaObject={parameter.schema} hideExample={hasExamples} />
        <Examples example={parameter.example} examples={parameter.examples} />
      </>
    ) : null
  }
</li>
