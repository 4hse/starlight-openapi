---
import type { PathItemOperation } from '../../libs/operation'
import { getParametersByLocation } from '../../libs/parameter'
import Section from '../Section.astro'

import Parameter from './Parameter.astro'

interface Props {
  operation: PathItemOperation
}

const {
  operation: { operation, pathItem },
} = Astro.props

const parametersByLocation = getParametersByLocation(operation.parameters, pathItem.parameters)

// TODO(HiDeoo) Format location
// TODO(HiDeoo) path parameters should always be first ??
---

{
  parametersByLocation.size > 0 && (
    <>
      <h2>Parameters</h2>
      {[...parametersByLocation.entries()].map(([location, parameters]) => (
        <Section title={`${location} parameters`}>
          {[...parameters.values()].map((parameter) => (
            <Parameter {parameter} />
          ))}
        </Section>
      ))}
    </>
  )
}
